var je=Object.defineProperty;var Qe=(e,t,n)=>t in e?je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var f=(e,t,n)=>Qe(e,typeof t!="symbol"?t+"":t,n);const Ye="adengadinfo",Je="adengadsizeinfo",Xe=e=>e.type==="clicked"||e.type==="force-close";var me=(e=>(e.BIDDER_RESPONSE="bid_response",e))(me||{}),Y=(e=>(e.ADENGPAGESTATUS="adengpagestatus",e))(Y||{}),ge=(e=>(e.IDENTITY_INFO="identity_info",e))(ge||{}),le=(e=>(e.LABRADOR_KEYVALUES="labrador_keyvalues",e))(le||{}),l=(e=>(e.AE_FIRST_LINE_EXEC="ae.firstLineExec",e.AE_AFTER_INIT_PLUGINS="ae.afterInitPlugins",e.AE_AFTER_GPT_WRAPPER_INIT="ae.afterGptWrapperInit",e.AE_AD_ENGINE_INIT="ae.adEngineInit",e.AE_ON_BIDDERS_INIT="ae.onBiddersInit",e.AE_CONFIG_CALLBACK_STARTED="ae.beforeAuction.configCallbackStarted",e.AE_CONFIG_CALLBACK_COMPLETE="ae.beforeAuction.configCallbackComplete",e.AE_AUCTION_START="ae.auctionStart",e.AE_AUCTION_START_A9_START="ae.auctionStart.a9.bidStart",e.AE_AUCTION_END="ae.auctionEnd",e.AE_BEFORE_FIRST_CALL_ADS_REQUEST="ae.beforeFirstCallAdsRequest",e.AE_FIRST_RENDER_CYCLE_COMPLETE="ae.firstRenderCycleComplete",e.AE_GPT_SLOT_REQUESTED_INITIAL="ae.gpt.slotRequested.initial",e.AE_GPT_SLOT_RESPONSE_RECEIVED_INITIAL="ae.gpt.slotResponseReceived.initial",e.AE_GPT_SLOT_RENDERED_ENDED_INITIAL="ae.gpt.slotRenderEnded.initial",e.AE_GPT_SLOT_SLOT_ONLOAD_INITIAL="ae.gpt.slotOnload.initial",e))(l||{}),U=(e=>(e.AE_AUCTION_DURATION_A9_BID_TOTAL_TIME="ae.d.auctionDuration.a9.bidTotalTime",e.AE_AUCTION_DURATION="ae.d.auctionDuration",e.AE_DURATION_TO_BID="ae.d.firstLineExec_to_auctionStart",e.AE_CONFIG_CALLBACK_DURATION="ae.d.configCallbackDuration",e))(U||{});const B="adengloadtimes";var g=(e=>(e.SLOT_REQUESTED="requested",e.SLOT_RENDERED="rendered",e.AE_INIT="init",e.VENDOR_TIME_UPDATE="vendor_time_update",e.CREATIVE_RENDERED="creative_rendered",e.PERFORMANCE_MARK="performance_mark",e))(g||{}),J=(e=>(e.TRACKING_EVENT="trackingevent",e))(J||{}),fe=(e=>(e.COMPONENT_PERFORMANCE_EVENT="component_performance",e))(fe||{}),_e=(e=>(e.RECOMMENDATION_EVENT="recommendation",e))(_e||{}),d=(e=>(e.P1="p1",e.P2="p2",e.P3="p3",e.P4="p4",e))(d||{}),O=(e=>(e.YES="yes",e.NO="no",e.NOT_APPLICABLE="",e))(O||{}),pe=(e=>(e.ERROR_NO_TIER_PROVIDED="-2",e.ERROR_DISABLED_TIERS="-1",e.NOT_SUITABLE_FOR_ADVERTISING="2",e.PARTIALLY_MONETIZED="3",e.FULLY_MONETIZED="4",e))(pe||{}),W=(e=>(e.FANDOM_DESKTOP="fandomdesktop",e.FANDOM_MOBILE="fandommobile",e))(W||{});function we(e){e.cmd??(e.cmd=[]);const t=[...e.cmd];e.cmd.push=(...n)=>{for(const r of n)r(e);return 0};for(const n of t)n(e)}function Ze(e,t){const n=[...e];e.push=(...r)=>(r.forEach(t),0),n.forEach(t),e.length=0}const et=e=>{const t=("; "+document.cookie).split("; "+e+"=");return t.length>=2?t.pop().split(";").shift():null},Ee=e=>e!=null&&e.length?` domain=${e};`:"",tt=(e,t,n)=>{const r=new Date;r.setTime(r.getTime()+n.expires*1e3),document.cookie=`${e}=${t};${Ee(n.domain)} path=${n.path}; expires=${r.toUTCString()}`},nt=(e,t)=>{document.cookie=`${e}=;${Ee(t.domain)} path=${t.path}; expires=Thu, 01 Jan 1970 00:00:00 GMT`},M={set:tt,get:et,delete:nt},he=()=>{const e=window.location.hostname,t=e.split(".");return t.length<2?e:`.${t[t.length-2]}.${t[t.length-1]}`};async function ve(e,t=1e3,n={}){const r=new AbortController,o=setTimeout(()=>r.abort("The request has timed out"),t),i=await fetch(e,{signal:r.signal,...n});return clearTimeout(o),i}function Te(e){return new URLSearchParams(window.location.search).get(e)}function X(e){const t=Te(e);return rt(e)&&t===""||t==="1"||t==="true"}function rt(e){return new URLSearchParams(window.location.search).has(e)}const ot="100",it=/^(?:v\d+-)?(\d{2})$/;function w(){let e=Te("pf_pathfinder_force_bucket")??M.get("exp_bucket");const t=e==null?void 0:e.match(it);return t&&t.length>=2&&(e=t[1]),e??ot}function st(e=window.fandomContext??null){var n;const t=(n=e==null?void 0:e.page)==null?void 0:n.monetizationTier;return typeof t=="number"?t.toString():pe.ERROR_NO_TIER_PROVIDED}const Z=()=>{var e;return window.fandomHost??(window.fandomHost={cmd:[]}),(e=window.fandomHost).cmd??(e.cmd=[]),window.fandomHost};function y(e){Z().cmd.push(t=>{t.issueManager.handleIssue({...e,type:"error"})})}function $(){var e,t,n;return window.fandomTrack??(window.fandomTrack={q:[],cmd:[],registry:{}}),(e=window.fandomTrack).q??(e.q=[]),(t=window.fandomTrack).cmd??(t.cmd=[]),(n=window.fandomTrack).registry??(n.registry={}),window.fandomTrack}function Se(e,t){$().q.push({event:e,payload:t})}function ee(e){Z().cmd.push(t=>{t.issueManager.handleIssue({...e,type:"degradation"})})}function at(e,t){return new Promise((n,r)=>{setTimeout(()=>{let o=`Operation timed out after ${e}ms`;r(new Error(o))},e)})}function ct(e,t,n){const r=at(t);return Promise.race([e,r])}function dt(e=[],t){const n=e.flat().filter(r=>r.status==="rejected");if(n.length>0){for(const o of n)y({message:"Promise rejected",error:o.reason,priority:d.P3});let r=`${n.length} of ${e.length} promises were rejected.`;y({message:r,priority:d.P3,data:n})}}async function ut(e,t,n){const r=await ct(Promise.allSettled(e),t);return dt(r),r}const ie="fandomConsentUpdate",mt=(e=window,t=!0)=>{const n=()=>{var r;return e.fandomCmp!==void 0&&e.fandomCmp.ready&&(t?(r=e.fandomCmp.allowed)==null?void 0:r.ads:!0)};return new Promise(r=>{if(n())return r();const o=()=>{n()&&(e.removeEventListener(ie,o),r())};e.addEventListener(ie,o)})},se="fandomContextUpdate",gt=(e=window)=>{const t=()=>{var n;return((n=e.fandomContext)==null?void 0:n.tracking)!==void 0&&e.fandomContext.tracking.pvNumber&&e.fandomContext.tracking.pvNumberGlobal&&e.fandomContext.tracking.pvUID};return new Promise(n=>{if(t())return n();const r=()=>{t()&&(e.removeEventListener(se,r),n())};e.addEventListener(se,r)})};function te(){var t;const e=(t=window.fandomAds)==null?void 0:t.deploymentEnvironment;return e==="production"||e==="canary"||e==="development"?e:"unknown"}const lt=/Mobile|iPhone|Android|Silk|Kindle|Windows Phone|KFAPWI|(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,ft=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i,_t=/iPad|Android(?!.*Mobile)/i,z=()=>{const e=window.navigator.userAgent;return _t.test(e)?"tablet":lt.test(e)||ft.test(e.substring(0,4))?"smartphone":"desktop"},pt=e=>e.includes("Android")?"Android":"Linux",wt=()=>{const e=window.navigator.userAgent,[t=""]=e.match(/Win|Mac|Linux|Android|like Mac/)??[];switch(t){case"Win":return"Windows";case"Mac":return"OSX";case"Linux":return pt(e);case"Android":return"Android";case"like Mac":return"iOS";default:return"unknown"}},ke={chrome:void 0,safari:void 0,firefox:void 0,msie:void 0,trident:void 0};function Et(e){return e in ke}function ht(e){const t=new RegExp(`(${Object.keys(ke).join("|")})\\/?\\s*(\\d+)`,"i"),n=e.match(t);if(!n||!n[1]||!n[2])return["",""];const r=n[1].toLowerCase(),o=Number.parseInt(n[2]);return!Et(r)||Number.isNaN(o)?["",""]:[r,`${o}`]}function P(e,t){return`${e} ${t}`}function vt(e){const t=e.match(/\b(OPR|Edg)\/(\d+)/);if(!t||!t[1]||!t[2])return"";const n=t[1],r=Number.parseInt(t[2]);if(Number.isNaN(r))return"";let o;return n==="OPR"?o="Opera":o="Edge",P(o,`${r}`)}function Tt(e,t){const n=e.match(/version\/(\d+)/i),r=Number.parseInt((n==null?void 0:n[1])??"");return P("Safari",Number.isNaN(r)?t:`${r}`)}function St(e,t){return`${e} ${t} -?`}function be(){const{appName:e,appVersion:t,userAgent:n}=navigator,[r,o]=ht(n);if(!r)return St(e,t);switch(r){case"trident":return P("IE","11");case"chrome":return vt(n)||P("Chrome",o);case"safari":return Tt(n,o);case"msie":return P("MSIE",o);case"firefox":return P("Firefox",o)}return""}const kt="https://services.fandom.com/geoip/location",Ie=async e=>{const t=e.get("Geo");if(t)try{return JSON.parse(decodeURIComponent(t))}catch(s){y({message:"Error parsing Geo cookie",priority:d.P3,error:s});const c=he();e.delete("Geo",{domain:c,path:"/"})}const n=await fetch(kt),{country_code:r,region:o,continent_code:i}=await n.json();return{country:r,region:o,continent:i}},bt=(e,t)=>{if(!e.get("Geo")){const r=he();e.set("Geo",encodeURIComponent(JSON.stringify(t)),{domain:r,path:"/",expires:365})}},It=e=>{const t=Array.isArray(e)?e.map(o=>o&&o.toString().split(":")).filter(o=>o&&o.length>=2).reduce((o,i)=>(o[i[0]]=i[1],o),{}):{},n=o=>o!=null&&o.isActive?o.keyVal:o==null?void 0:o.defaultKeyVal,r=[];return{mark(o){const i=n(o);i&&!r.includes(i)&&r.push(i)},deprecatedMark:(o,i,s)=>{const c=s?i:100-i,u=`${o}_${s?"B":"A"}_${c}`,m=t[u]??u;r.includes(m)||r.push(m)},getLabradorKeyValues:()=>r}},L="non-",j="XX";function At(e){return e.startsWith(L)?{value:e.replace(L,""),negated:!0}:{value:e,negated:!1}}function Nt(e,t){return t.some(n=>e.includes(n.value)&&n.negated)}const Rt=e=>{const t=e==null?void 0:e.toLowerCase();return n=>{const o=(n.d??n.devices??[]).map(i=>At(i.toLowerCase()));return o.length===0||!t?!0:Nt(t,o)?!1:o.some(i=>i.value===t!==i.negated)}};function Ct(e,t,n,r){return e.includes(`${L}${t}`)||e.includes(`${L}${t}-${n}`)||e.includes(`${L}${j}-${r}`)}function Ot(e,t,n,r){return e.includes(j)||e.includes(`${j}-${r}`)||e.includes(t)||e.includes(`${t}-${n}`)}const yt=e=>{const t=e.country,n=e.region,r=e.continent;return o=>{const i=o.r??o.regions??[];return i.length===0||Ct(i,t,n,r)?!1:Ot(i,t,n,r)}},Pt=e=>{try{const t=e.localStorage!==void 0&&e.localStorage!==null;return t&&(e.localStorage.setItem("__test__","test"),e.localStorage.removeItem("__test__")),t}catch{return!1}},Dt=(e,t,n)=>{const r=Pt(n),o={getItem:a=>r?n.localStorage.getItem(a):null,setItem:(a,u)=>{if(r)return n.localStorage.setItem(a,u)}},i=a=>a?a<Date.now():!0,s=a=>({data:a,ttl:Date.now()+t}),c=a=>i(a.ttl)?null:a.data;return{set:a=>{const u=s(a);o.setItem(e,JSON.stringify(u))},get:()=>{const a=o.getItem(e);return a?c(JSON.parse(a)):null}}};function xt(e){return{source:e.s,rules:{defaultKeyValue:e.r.k,ranges:e.r.r.map(t=>({start:t.s,end:t.e,keyValue:t.k}))}}}function Lt(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="object"}function Ae(e){const t=e.sampling??e.s;return typeof t=="number"&&t>0&&t<100?t:null}function Ne(e){return(e==null?void 0:e.bucketing)??((e==null?void 0:e.bu)!==void 0?xt(e.bu):void 0)}const ae=(e,t,n,r,o,i)=>{const s=e[n];if(Lt(s)){const c=s.find(a=>{const u=t.reduce((x,N)=>x&&N(a),!0),m=Ne(a);if(m&&i&&u){const N=i(m.source)(a);if(N)return o==null||o.mark(N),N.isActive}const _=Ae(a);if(_===null||!u||!r)return u;const D=r(a);return o&&o.deprecatedMark(n,_,D),D});return(c==null?void 0:c.v)??(c==null?void 0:c.value)}return s},Bt=async(e,t)=>{const n=e.instantConfig;if(n)return n;const r=`https://services.fandom.com/icbm/api/config?app=${t}&compact=true`,o=`https://script.wikia.nocookie.net/fandom-ae-assets/icbm/prod/icbm_state_${t}.json`,i=Dt(`instant-config-${t}`,6e4,e),s=await Mt(r,i)??await Re(o)??{};return e.instantConfig=s,s},Mt=async(e,t)=>{const n=t.get();if(n)return JSON.parse(n);const r=await Re(e);return r&&t.set(JSON.stringify(r)),r},Re=async e=>{try{const t=await ve(e,2e3);return t.ok?t.json():void 0}catch{return}},$t=e=>t=>{const n=Ae(t);if(n===null)return!0;const r=Math.round(e()),o=Math.round(n);return r<o},Ce=e=>{var n;const t=Number(((n=e.fandomContext)==null?void 0:n.experimentBucket)??M.get("eb")??Math.floor(Math.random()*100));return e.fandomContext=e.fandomContext||{},e.fandomContext.experimentBucket=t,()=>t},Ut=()=>Number(w()),ce=e=>t=>{var i;const n=Ne(t);if(!((i=n==null?void 0:n.rules)!=null&&i.ranges))return;const r=Math.round(e()),o=n.rules.ranges.find(s=>r>=s.start&&r<=s.end);return{isActive:!!o,defaultKeyVal:n.rules.defaultKeyValue,keyVal:o==null?void 0:o.keyValue}};function Vt(e){return t=>{switch(t){case"eb":return ce(Ce(e));case"exp_bucket":return ce(Ut);default:throw new Error(`Unknown bucketing source: ${t}`)}}}const Ft=({device:e,geo:t})=>[Rt(e),yt(t)];function zt(e){if(e==="true"||e==="false")return e==="true";const t=parseInt(e,10);if(e===`${t}`)return t;try{return JSON.parse(e)}catch{return e}}function Ht(e,t){return[...t.keys()].filter(n=>n.startsWith("icbm__")&&t.get(n)!==null).map(n=>{const[,r]=n.split("__");return{key:r,value:zt(t.get(n))}}).reduce((n,{key:r,value:o})=>({...n,[r]:o}),e)}const Gt=async(e,t)=>{const n=await Bt(t,e);return Ht(n,new URLSearchParams(t.location.search))},qt=(e,t,n)=>{const r=$t(Ce(n)),o=It(ae(e,t,"icLABradorGamKeyValues")),i=Vt(n);return{config:Object.keys(e).reduce((c,a)=>(c[a]=ae(e,t,a,r,o,i),c),{}),activeLabradorKeyValues:o.getLabradorKeyValues()}},Kt={icPrebidIntentIQTimeout:500,icPrebidIntentIQVersion:"6.06-20240711",icPreferredCMP:"onetrust",icAdEngineWaitBeforeFirstAdsRequestMS:0,icAdEngineAuctionTimeoutMS:1500,icAdEngineOnCreateBiddersRequestsTimeoutMS:1510,icAdEngineBidderInitTimeoutMS:1005,icPrebidConfigUpdateTimeoutMS:1e3,icPrebidConsentManagementTimeoutMS:1500,icPrebidInitTimeoutMS:500},Wt=async(e,t,n)=>{const r=await Gt(e,n);return qt(r,t,n)};async function jt(e,t,n){const r=Ft({device:t,geo:n}),{config:o,activeLabradorKeyValues:i}=await Wt(e,r,window);return{config:{...Kt,...o},activeLabradorKeyValues:i}}function Qt(){return"v156"}function Yt(e){return e.type==="error"}function Jt(e){return e.type==="degradation"}const de=e=>{const t=/(\d+)$/.exec(e);return t?Number(t[1]):Number.POSITIVE_INFINITY};function Xt(e,t){return de(e)<=de(t)}function Zt(){var e,t,n;return((n=(t=(e=window.ads)==null?void 0:e.context)==null?void 0:t.opts)==null?void 0:n.noAdsReasons)??[]}function en(e){return e.type===void 0&&(console.warn("Invalid usage of issue, the issue type is missing",e),e.type="error"),{type:e.type,timestamp:new Date,performanceMark:e.performanceMark??performance.mark(e.message),error:void 0,inPageStatus:!1,...e,data:e.data}}const tn=new Map([[d.P1,"fatal"],[d.P2,"error"],[d.P3,"warning"],[d.P4,"log"]]);function nn(){return new Promise(e=>{window.fandomSentry?e(window.fandomSentry):window.addEventListener("fandomSentryLoaded",()=>{e(window.fandomSentry)})})}async function rn(e){(await nn()).withScope(n=>{var r;n.setTag("Environment",te()),n.setTag("priority",e.priority),n.setTag("adengpagestatus",e.inPageStatus?"true":"false"),n.setTag("configVersion",((r=window.fandomAdsSlotsConfig)==null?void 0:r.version)??"unknown"),n.setLevel(on(e.priority)),n.setTransactionName(sn(e)),n.captureException(e.error)})}function on(e){return tn.get(e)??"error"}function sn(e){let t="no error";return e.error instanceof Error&&(t=`${e.error.name} - ${e.message}`),`[${e.priority} ${e.type}] ${e.message} (${t})`}const G={error:{p1:1,p2:.5,p3:0,p4:0},degradation:{p1:1,p2:.1,p3:0,p4:0}};class an{constructor(t={}){f(this,"sentrySampleSettings");f(this,"queryOverride");this.sentrySampleSettings=this.mergeSampleSettings(t.sentrySampleOverrides),this.queryOverride=X("force_sentry_send")}mergeSampleSettings(t){try{const n=te(),{error:r={},degradation:o={}}=(t==null?void 0:t[n])??{};return{error:{...G.error,...r},degradation:{...G.degradation,...o}}}catch(n){return y({priority:d.P3,message:"Error merging sample settings in SentryManager",error:n}),G}}shouldSendToSentry(t){if(this.queryOverride)return!0;if(t.inPageStatus===!1)return!1;const n=this.sentrySampleSettings[t.type][t.priority];return Math.random()<n}handleIssue(t){this.shouldSendToSentry(t)&&rn(t)}}const F=class F{constructor(t){f(this,"errorLog",[]);f(this,"degradationLog",[]);f(this,"cleanups",[]);f(this,"logPrefix","[Odyssey]");f(this,"eventSent",!1);f(this,"minLoggingLevel");f(this,"sentryManager");var n;this.minLoggingLevel=t.minLoggingLevel??d.P2;try{this.sentryManager=new an({sentrySampleOverrides:(n=window.icbm)==null?void 0:n.config.icSentrySampleOverrides}),this.sendOnSchedule(),this.sendOnPageHidden()}catch(r){console.error(`${this.logPrefix} IssueManager had a failure while initializing:`,r)}}sendOnSchedule(){if(this.eventSent)return;const t=setTimeout(()=>{this.eventSent||this.triggerPageStatus({trigger:"timeout"})},F.PAGE_STATUS_TIMEOUT_MS);this.cleanups.push(()=>clearTimeout(t))}sendOnPageHidden(){if(this.eventSent)return;const t=()=>{this.eventSent||document.visibilityState==="hidden"&&this.triggerPageStatus({trigger:"page_hidden"})};document.addEventListener("visibilitychange",t),this.cleanups.push(()=>document.removeEventListener("visibilitychange",t))}triggerPageStatus(t){this.eventSent||(this.eventSent=!0,this.cleanups.forEach(n=>n()),this.sendPageStatus(t))}handleIssue(t){var r;const n=en(t);this.printIssue(t),Jt(n)?this.handleDegradation(n):Yt(n)&&this.handleError(n),n.inPageStatus=!this.eventSent,(r=this.sentryManager)==null||r.handleIssue(n)}handleDegradation(t){this.degradationLog.push(t)}handleError(t){this.errorLog.push(t)}printIssue(t){Xt(t.priority,this.minLoggingLevel)&&console.warn(`${this.logPrefix} [${t.priority}]: ${t.message}`,t.error,t.data)}errorCount(t){return this.errorLog.filter(n=>n.priority===t).length}degradationCount(t){return this.degradationLog.filter(n=>n.priority===t).length}sendPageStatus(t){const n=t.trigger!=="no_ads",r={event:Y.ADENGPAGESTATUS,payload:{deploymentEnvironment:te(),eventTrigger:t.trigger,errors:{p1:this.errorCount(d.P1),p2:this.errorCount(d.P2),p3:this.errorCount(d.P3),p4:this.errorCount(d.P4)},degradations:{p1:this.degradationCount(d.P1),p2:this.degradationCount(d.P2),p3:this.degradationCount(d.P3),p4:this.degradationCount(d.P4)},monetizationStatus:n?"ads":"no_ads",monetizationReasons:n?[]:Zt(),monetizationTier:st(),statusChecks:{firstAuctionTimedOut:!1,helixTargetingIncluded:!0}}};return Se(r.event,r.payload),r}};f(F,"PAGE_STATUS_TIMEOUT_MS",3e4);let Q=F;class cn{constructor(){f(this,"adBlockDataPromise",Promise.withResolvers());this.runInitChecks()}adBlockSuspected(t){this.updateWindow(t.suspected,[t.reason])}async runInitChecks(){let t=[];try{t=await ut([this.checkForScriptBlock("gumgum","https://g2.gumgum.com/hbid/imp?displaymanager=Prebid.js")],5e3)}catch{t=[{status:"fulfilled",value:{suspected:!0,reason:"initCheckTimeout"}}]}let n=!1;const r=[];for(const o of t)o.status==="fulfilled"?o.value.suspected&&(n=!0,r.push(o.value.reason)):ee({message:"Error running an AdBlockManager check",priority:d.P3});this.updateWindow(n,r)}updateWindow(t,n){window.fandomHost=window.fandomHost??{adBlockSuspected:void 0,adBlockReasons:[]},window.fandomHost.adBlockSuspected!=!0&&(window.fandomHost.adBlockSuspected=t),window.fandomHost.adBlockReasons=window.fandomHost.adBlockReasons?[...new Set(window.fandomHost.adBlockReasons.concat(n))]:n,this.adBlockDataPromise.resolve(()=>({adBlockSuspected:window.fandomHost.adBlockSuspected,adBlockReasons:window.fandomHost.adBlockReasons}))}async checkForScriptBlock(t,n){let r;try{await fetch(n,{method:"HEAD"}),r=!1}catch{r=!0}return{suspected:r,reason:`adTechFetch:${t}`}}getAdBlockData(){return this.adBlockDataPromise.promise}}const dn=()=>{try{return window.self!==window.top}catch{return!0}},un=["fandom.com","fandom-dev.pl","fandom-dev.us"],mn=async()=>{const e=un.some(t=>window.location.hostname.includes(t));return dn()||!e},gn=()=>Promise.all([gt(),mt()]);function ln(){var e,t,n;return((e=window.fandomCmp)==null?void 0:e.ready)===!0&&((t=window.fandomCmp)==null?void 0:t.allowed.ads)===!0&&((n=window.fandomCmp)==null?void 0:n.optOut)===!1}function ne(e,t){return ln()?e():t}const fn=4e3,Oe="opted-out",_n=-1;function pn(e){switch(e){case W.FANDOM_DESKTOP:return"ucp_desktop";case W.FANDOM_MOBILE:return"ucp_mobile";default:return e}}function S(){return ne(()=>{var e,t;return((t=(e=window.fandomContext)==null?void 0:e.tracking)==null?void 0:t.sessionId)??"unknown"},Oe)}function b(){return ne(()=>{var e,t;return((t=(e=window.fandomContext)==null?void 0:e.tracking)==null?void 0:t.beaconId)??"unknown"},Oe)}function R(){return ne(()=>{var e,t;return((t=(e=window.fandomContext)==null?void 0:e.tracking)==null?void 0:t.userId)??0},_n)}function I(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.tracking)==null?void 0:t.pvNumber)??-1}function A(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.tracking)==null?void 0:t.pvNumberGlobal)??-1}function E(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.tracking)==null?void 0:t.pvUID)??"unknown"}function ye(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.tracking)==null?void 0:t.ppid)??"unknown"}function k(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.site)==null?void 0:t.siteId)??"unknown"}function v(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.site)==null?void 0:t.siteName)??"unknown"}function T(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.page)==null?void 0:t.lang)??"unknown"}function C(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.page)==null?void 0:t.articleId)??-1}function wn(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.page)==null?void 0:t.monetizationTier)??-2}function p(){var e,t;return pn(((t=(e=window.ads)==null?void 0:e.context)==null?void 0:t.platform)??"unknown")??"unknown"}function Pe(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.page)==null?void 0:t.pageType)??"unknown"}function De(){var e;return((e=window.RLCONF)==null?void 0:e.wgNamespaceNumber)??-1}function re(){return`${wt()} ${be()}`}function En(){return"https://beacon.wikia-services.com/__track/special/"}const xe=(e,t,n)=>{const r=new URL(e);Object.entries(t).forEach(([o,i])=>{r.searchParams.set(o,String(i))}),ve(r.toString(),fn,{mode:"no-cors"}).catch(o=>y({message:(n==null?void 0:n.errorMessage)??"Failed to send tracking request",priority:d.P4,error:o}))},hn=(e,t)=>{const n=`${En()}${e}`;xe(n,t,{errorMessage:"Failed to send request to Beacon service"})},vn=e=>{let t;return()=>(t!==void 0||(t=Math.random()*100<e),t)},Tn=()=>!0,Sn=(e,t,n={})=>{var s;const r=(s=$().registry)[e]??(s[e]=[]),o={sampling:n.sampling??Tn,requiresConsent:n.requiresConsent??!0},i=Object.assign(t,o);r.includes(i)||r.push(i)};class kn{constructor(){f(this,"cmd",[]);f(this,"onReady",gn());const t=$();this.cmd=t.cmd,we(this),Ze(t.q,this.executeTracking.bind(this))}executeTracking(t){var r,o;const n=(o=(r=window.fandomTrack)==null?void 0:r.registry)==null?void 0:o[t.event];if(!n||n.length===0){ee({message:"Unhandled tracking event",priority:d.P4,data:t});return}n.forEach(i=>this.trackEvent(i,t))}trackEvent(t,n){const r=()=>{t.sampling()&&t(n,hn)};if(!t.requiresConsent)return r();this.onReady.then(r)}triggerPageStatus(t){Z().cmd.push(n=>{n.issueManager.triggerPageStatus(t)})}registerTracker(t,n,r){Sn(t,n,r)}}function bn(){return(["fandom.com"].find(n=>window.location.hostname.includes(n))?"https://services.fandom.com/":"https://services.fandom-dev."+(location.hostname.match(/(?!\.)(pl|us)$/)??["us"])[0]+"/").replace(/\/+$/,"")}const q=new Map;function In(e){var o,i;if(X("force_tracking"))return!0;const t=q.get(e);if(t!==void 0)return t;const n=(i=(o=window.icbm)==null?void 0:o.config)==null?void 0:i.odysseyPrometheusSenderTrafficLimiter;if((n==null?void 0:n[e])===void 0)return q.set(e,!0),!0;const r=Math.random()*100<n[e];return q.set(e,r),r}function oe(e,t){var o,i;if(!In(e))return;const n=[bn(),"adeng","api","adengine","meter",e].join("/"),r=(((i=(o=window==null?void 0:window.ads)==null?void 0:o.context)==null?void 0:i.platform)||"fandom")+"_odyssey";xe(`${n}?app=${r}`,t,{errorMessage:"Failed to send adengine metrics"})}function An({payload:e},t){const n=e.slotName?`_${e.slotName}`:"",r=t??e.type;oe("time",{action:`${r}${n}`,duration:Math.round(e.time)})}const Nn=/\./g;function Le(e){return e.replace(Nn,"_")}function Rn({event:e,payload:t,alias:n}){const r=n??e,o=t.slotName?`_${t.slotName}`:"",i={action:`${r}${o}`,duration:Math.round(t.time)};oe("time",i),Be(i)}function Cn(e){const n={action:Le(e.name),duration:Math.round(e.duration)};oe("time",n),Be(n)}function Be(e){Se(B,{type:g.PERFORMANCE_MARK,eventName:e.action,time:e.duration})}const On={[l.AE_FIRST_LINE_EXEC]:{},[l.AE_AFTER_INIT_PLUGINS]:{},[l.AE_AFTER_GPT_WRAPPER_INIT]:{},[l.AE_AD_ENGINE_INIT]:{},[l.AE_ON_BIDDERS_INIT]:{},[l.AE_AUCTION_START]:{onlyFirstRender:!0,duration:{start:l.AE_FIRST_LINE_EXEC,name:U.AE_DURATION_TO_BID}},[l.AE_CONFIG_CALLBACK_COMPLETE]:{duration:{start:l.AE_CONFIG_CALLBACK_STARTED,name:U.AE_CONFIG_CALLBACK_DURATION}},[l.AE_AUCTION_END]:{onlyFirstRender:!0,duration:{start:l.AE_AUCTION_START,name:U.AE_AUCTION_DURATION}},[l.AE_BEFORE_FIRST_CALL_ADS_REQUEST]:{},[l.AE_GPT_SLOT_REQUESTED_INITIAL]:{slotName:"top_leaderboard"},[l.AE_GPT_SLOT_RESPONSE_RECEIVED_INITIAL]:{slotName:"top_leaderboard"},[l.AE_GPT_SLOT_RENDERED_ENDED_INITIAL]:{slotName:"top_leaderboard"},[l.AE_GPT_SLOT_SLOT_ONLOAD_INITIAL]:{slotName:"top_leaderboard"}};class yn{constructor(){f(this,"eligiblePerformanceMarks",On);f(this,"eligibleEvents",[g.AE_INIT,g.SLOT_REQUESTED,g.SLOT_RENDERED,g.CREATIVE_RENDERED]);f(this,"performanceObserver");this.performanceObserver=this.createPerformanceObserver(),this.startPerformanceObserver(this.performanceObserver),this.registerTrackers()}createPerformanceObserver(){return new window.PerformanceObserver((t,n)=>{this.trackPerformanceMarks(t),this.disconnectPerformanceObserver(n)})}startPerformanceObserver(t){t.observe({type:"mark",buffered:!0})}disconnectPerformanceObserver(t){setTimeout(()=>{t.disconnect()},6e4)}registerTrackers(){$().cmd.push(t=>{t.registerTracker(g.CREATIVE_RENDERED,({payload:n})=>this.trackEvent({event:B,payload:{...n,type:g.CREATIVE_RENDERED}})),t.registerTracker(B,this.trackEvent.bind(this))})}trackEvent(t){this.eligibleEvents.includes(t.payload.type)&&(this.performanceMarkEvent(t),An(t,this.getAlias(t.payload.type)))}performanceMarkEvent({payload:t}){switch(t.type){case g.AE_INIT:performance.mark(`odyssey_${t.type}`);break;case g.SLOT_REQUESTED:case g.SLOT_RENDERED:performance.mark(`odyssey_${t.slotName}_${t.type}`);break}}getAlias(t){return{[g.AE_INIT]:void 0,[g.SLOT_REQUESTED]:"request",[g.SLOT_RENDERED]:"render",[g.VENDOR_TIME_UPDATE]:void 0,[g.CREATIVE_RENDERED]:void 0,[g.PERFORMANCE_MARK]:void 0}[t]}trackPerformanceMarks(t){t.getEntriesByType("mark").forEach(r=>{if(r){const o=this.transformEligiblePerformanceMark(r);o&&(Rn(o),this.trackDurations(r))}})}trackDurations(t){try{const n=this.eligiblePerformanceMarks[t.name];if(n&&n.duration){const r=this.findMatchingStartMark(n.duration.start,t);if(!r){y({message:`Could not measure performance duration: no matching start mark found for ${t.name}`,priority:d.P3});return}const o=performance.measure(n.duration.name,{start:r.startTime,end:t.startTime});Cn(o)}}catch{y({message:"Could not measure performance duration",priority:d.P3})}}findMatchingStartMark(t,n){const r=performance.getEntriesByName(t,"mark");if(r.length)return n.name!=l.AE_AUCTION_END?r[r.length-1]:r.find(o=>{var i,s;return((i=o.detail)==null?void 0:i.auctionId)===((s=n.detail)==null?void 0:s.auctionId)})}transformEligiblePerformanceMark(t){var c;const n=this.eligiblePerformanceMarks[t.name];if(n===void 0||this.abortRefreshMark(n,t))return;const r=Math.round(t.startTime),o=Le(t.name),i=n.slotName!==void 0,s=i?(c=t.detail)==null?void 0:c.slotId:void 0;if(!(i&&n.slotName!==s))return{event:t.name,payload:{time:r,...i&&{slotName:s}},alias:o}}abortRefreshMark(t,n){var o;if((t==null?void 0:t.onlyFirstRender)!=!0)return!1;const r=(o=n.detail)==null?void 0:o.renderCycleCount;return r?r>1:(ee({message:`${n.name} is missing a renderCycleCount`,priority:d.P4}),!0)}}const H=e=>Object.fromEntries(Object.entries(e).filter(([,t])=>t!=null));function Me(e){var t,n,r;return((t=window.fandomCmp)==null?void 0:t.ready)===!0&&((n=window.fandomCmp)==null?void 0:n.allowed.ads)===!0&&((r=window.fandomCmp)==null?void 0:r.consentApi)===e}function $e(){var e;return Me("tcf")?((e=window.fandomCmp)==null?void 0:e.optOut)===!1?O.YES:O.NO:O.NOT_APPLICABLE}function Ue(){var e;return Me("usp")?((e=window.fandomCmp)==null?void 0:e.optOut)===!0?O.YES:O.NO:O.NOT_APPLICABLE}function Ve(){var e,t,n;return((n=(t=(e=window.ads)==null?void 0:e.context)==null?void 0:t.targeting)==null?void 0:n.wikiVertical)??"unknown"}async function Pn(e,t){var c,a,u,m,_;const n=new Date,r=window.fandomHost.geo,o=await((c=window.fandomHost)==null?void 0:c.proxyPageSuspected),i=(a=window.fandomHost)==null?void 0:a.adBlockSuspected,s=(m=(u=window.fandomHost)==null?void 0:u.adBlockReasons)!=null&&m.length?window.fandomHost.adBlockReasons.join(";"):void 0;return{ad_status:Fe(e.type),timestamp:n.getTime(),tz_offset:n.getTimezoneOffset(),device:z(),country:r.country,region:r.region,lang:T(),slot_id:Ge(e,t),slot_size:"",kv_pos:e.slotName,kv_rv:qe(e),kv_s0v:Ve(),kv_s1:`_${v()}`,kv_s2:Pe(),kv_skin:p(),ppid:ye(),page_width:window.document.body.scrollWidth.toString(),viewport_height:He(window.innerHeight),rollout_tracking:ze(),opt_in:$e(),is_uap:0,opt_out_sale:Ue(),session_id:S(),pv_number:I(),pv_number_global:A(),pv_unique_id:E(),beacon:b(),c:k(),x:v(),lc:T(),s:p(),ua:window.navigator.userAgent,u:R(),a:C(),n:-1,exp_bucket:w(),browser:re(),odyssey_version:((_=window.fandomAds)==null?void 0:_.version)??"unknown",proxy_page_suspected:o,ad_block_suspected:i,ad_block_reasons:s}}async function Dn(e,t){var c,a,u,m,_;const n=new Date,r=window.fandomHost.geo,o=await((c=window.fandomHost)==null?void 0:c.proxyPageSuspected),i=(a=window.fandomHost)==null?void 0:a.adBlockSuspected,s=(m=(u=window.fandomHost)==null?void 0:u.adBlockReasons)!=null&&m.length?window.fandomHost.adBlockReasons.join(";"):void 0;return{ad_status:Fe(e.type),timestamp:n.getTime(),tz_offset:n.getTimezoneOffset(),device:z(),country:r.country,region:r.region,lang:T(),advertiser_id:Ln(e),creative_id:Bn(e),product_lineitem_id:Mn(e),order_id:$n(e),slot_id:Ge(e,t),slot_size:Un(e),kv_pos:e.slotName,kv_rv:qe(e),kv_s0v:Ve(),kv_s1:`_${v()}`,kv_s2:Pe(),kv_skin:p(),ppid:ye(),page_width:window.document.body.scrollWidth.toString(),viewport_height:He(window.innerHeight),rollout_tracking:ze(),opt_in:$e(),is_uap:0,opt_out_sale:Ue(),session_id:S(),pv_number:I(),pv_number_global:A(),pv_unique_id:E(),beacon:b(),c:k(),x:v(),lc:T(),s:p(),ua:window.navigator.userAgent,u:R(),a:C(),n:-1,exp_bucket:w(),browser:re(),odyssey_version:((_=window.fandomAds)==null?void 0:_.version)??"unknown",proxy_page_suspected:o,ad_block_suspected:i,ad_block_reasons:s}}const xn=e=>async(t,n)=>{let r;Xe(t.payload)?r=await Pn(t.payload,e):r=await Dn(t.payload,e),n(t.event,H(r))};function Fe(e){return e.toString().replace("_info","")}function ze(){return window.OneTrust!==void 0?"1T":"toi"}function He(e){return e??0}function Ln(e){var t;return`${((t=e.slotInfo)==null?void 0:t.advertiserId)??""}`}function Bn(e){var t;return`${((t=e.slotInfo)==null?void 0:t.creativeId)??""}`}function Mn(e){var t;return`${((t=e.slotInfo)==null?void 0:t.lineItemId)??""}`}function $n(e){var t;return`${((t=e.slotInfo)==null?void 0:t.orderId)??""}`}function Ge(e,t){const n=e.slotName??"unknown";return t.getUid(n)}function Un(e){var t,n;return(t=e.slotInfo)!=null&&t.selectedSize?e.slotInfo.selectedSize:(n=e.slotInfo)!=null&&n.configuredSizes?e.slotInfo.configuredSizes.join(","):""}function qe(e){return e.rv??-1}const Vn={[g.AE_INIT]:{type:"load_times",beaconEventName:"load_time_init"},[g.SLOT_REQUESTED]:{type:"load_times",beaconEventName:"requested"},[g.SLOT_RENDERED]:{type:"load_times",beaconEventName:"loaded"}},ue=async({event:e,payload:t},n)=>{var m,_,D,x,N;const r=new Date,o=window.fandomHost.geo,i=await((m=window.fandomHost)==null?void 0:m.proxyPageSuspected),s=Vn[t.type],c=(_=window.fandomHost)==null?void 0:_.adBlockSuspected,a=(x=(D=window.fandomHost)==null?void 0:D.adBlockReasons)!=null&&x.length?window.fandomHost.adBlockReasons.join(";"):void 0,u={event_name:Fn(t,s),browser_ts:r.getTime(),load_time:Math.round(t.time),tz_offset:r.getTimezoneOffset(),country:o.country,session_id:S(),pv_unique_id:E(),c:k(),s:p(),exp_bucket:w(),proxy_page_suspected:i,odyssey_version:((N=window.fandomAds)==null?void 0:N.version)??"unknown",ad_block_suspected:c,ad_block_reasons:a};n(e,H(u))};function Fn(e,t){return`${e.slotName?`${e.slotName}_`:""}${(t==null?void 0:t.beaconEventName)??e.eventName??e.type}`}function zn(e,t,n,r,o){var i;return{status:Gn(e),name:qn(e),rv:Jn(e),auction_id:e.bidInfo.auctionId??"",rejection_reason:e.bidInfo.rejectionReason??"",odyssey_version:((i=window.fandomAds)==null?void 0:i.version)??"unknown",response_time:jn(e),size:Kn(e),price:Wn(e),additional_flags:Yn(e),slot_id:t.getUid(e.slotName),pos:e.baseSlotName,pv_number:I(),pv_number_global:A(),pv_unique_id:E(),c:k(),s:p(),exp_bucket:w(),proxy_page_suspected:n,ad_block_suspected:r,ad_block_reasons:o,full_auction:Xn(e)}}const Hn=e=>async({payload:t},n)=>{var c,a,u,m;const r=await((c=window.fandomHost)==null?void 0:c.proxyPageSuspected),o=(a=window.fandomHost)==null?void 0:a.adBlockSuspected,i=(m=(u=window.fandomHost)==null?void 0:u.adBlockReasons)!=null&&m.length?window.fandomHost.adBlockReasons.join(";"):void 0,s=zn(t,e,r,o,i);n("adengbidders",H(s))};function Gn(e){var t,n,r;return(t=e.bidInfo)!=null&&t.status?e.bidInfo.status:((n=e.bidInfo)==null?void 0:n.timedOut)===!0?"timedout":((r=e.bidInfo)==null?void 0:r.timedOut)===!1?"on_time":"unknown"}function qn(e){var t;return((t=e.bidInfo)==null?void 0:t.bidderName)??"unknown"}function Kn(e){var t;return((t=e.bidInfo)==null?void 0:t.size)??"unknown"}function Wn(e){var t;return((t=e.bidInfo)==null?void 0:t.price)??"unknown"}function jn(e){var t;return((t=e.bidInfo)==null?void 0:t.timeToRespond)??0}function Qn(e){var t,n,r;(t=e==null?void 0:e.bidInfo)!=null&&t.buyerId&&((r=e.flags)==null||r.push(`buyer_id=${(n=e.bidInfo)==null?void 0:n.buyerId}`))}function Yn(e){return e.flags=[],Qn(e),(e.flags??[]).join(";")}function Jn(e){return e.rv??-1}function Xn(e){var t;return((t=e.bidInfo)==null?void 0:t.fullAuction)===!0?"yes":"no"}const Ke="error",Zn=e=>({event:t,payload:n},r)=>{const o=window.fandomHost.geo,i=K(n),s={slot_size:cr(n),real_ad_size:ar(i),requested_sizes:dr(n),slot_id:e.getUid(K(n)),position:K(n),country_code:o.country,region:o.region,rv:ur(n),...er(n),session_id:S(),pv_number:I(),pv_number_global:A(),pv_unique_id:E(),beacon:b(),c:k(),x:v(),lc:T(),s:p(),ua:window.navigator.userAgent,u:R(),a:C(),n:-1,exp_bucket:w()};r(t,s)};function er(e){const t=e.slotInfo??{};return{advertiser_id:`${t.advertiserId??""}`,creative_id:`${t.creativeId??""}`,line_item_id:`${t.lineItemId??""}`,order_id:`${t.orderId??""}`}}function tr(e){return nr(e)??or(e)}function nr(e){const t=rr(e);if(!t)return;const{offsetHeight:n,offsetWidth:r}=t;return n&&r?{height:n,width:r}:void 0}function rr(e){var t,n,r;return(r=(n=(t=document.querySelector(`#${e} [id*='google_ads_iframe_\\/5441'] iframe`))==null?void 0:t.contentWindow)==null?void 0:n.document)==null?void 0:r.querySelector("html")}function or(e){var o;const t=(o=document.querySelector(`#${e} [id*='google_ads_iframe_\\/5441'] div`))==null?void 0:o.firstElementChild;if(!t)return;const{clientHeight:n,clientWidth:r}=t;return n&&r?{height:n,width:r}:void 0}function ir(e){const t=document.getElementById(e);return{width:(t==null?void 0:t.offsetWidth)??0,height:(t==null?void 0:t.offsetHeight)??0}}function sr(e){const t=document.querySelector(`#${e} iframe`);if(!t)return;const{clientHeight:n,clientWidth:r}=t;return n&&r?{height:n,width:r}:void 0}function ar(e){const t=CSS.escape(e),{width:n,height:r}=sr(t)??tr(t)??ir(t);return!n||!r?"unknown":`${n}x${r}`}function cr(e){var t,n;return((t=e.slotInfo)==null?void 0:t.selectedSize)===null?"unknown":(n=e.slotInfo)!=null&&n.selectedSize?e.slotInfo.selectedSize:Ke}function dr(e){try{const t=e.slotInfo.parsedSizes.join(",");return t===""?"unknown":t}catch{return Ke}}function K(e){return e.slotName??"unknown"}function ur(e){return e.rv??-1}const mr=async({payload:e},t)=>{var s;const n=new Date,r=await Ie(M);if(gr(e)==="")return;const i={timestamp:n.getTime(),tz_offset:n.getTimezoneOffset(),prop_value:((s=e.flags)==null?void 0:s.join(";"))??"",country:r.country,session_id:S(),pv_number:I(),pv_number_global:A(),pv_unique_id:E(),beacon:b(),c:k(),x:v(),lc:T(),s:p(),ua:window.navigator.userAgent,u:R(),a:C(),n:-1,exp_bucket:w()};t("adenglabradorinfo",i)};function gr(e){var t;return((t=e.flags)==null?void 0:t.join(";"))??""}const lr=({event:e=J.TRACKING_EVENT,payload:t},n)=>{const r={...t,url:document.URL,session_id:S(),pv_number:I(),pv_number_global:A(),pv_unique_id:E(),beacon:b(),c:k(),x:v(),lc:T(),s:We(),ua:window.navigator.userAgent,u:R(),a:C(),n:-1,exp_bucket:w()};n(e,r)};function We(){return`ucp_${z()==="smartphone"?"mobile":"desktop"}`}const fr=({payload:e},t)=>{const n={partner_name:e.partnerName,partner_identity_id:e.partnerIdentityId,pv_unique_id:E(),session_id:S(),beacon:b(),ua:window.navigator.userAgent,s:We()};t("identityinfo",n)},_r=({payload:e},t)=>{const n=new Date,r={tag_name:e.tagName,event_name:e.eventName,event_details:e.eventDetails,start_time:e.startTime,monetization_tier:wn(),wiki_vars:e.wikiVars,env:e.env,software_version:e.softwareVersion,exp_data:e.expData,c:k(),n:De(),a:C(),s:p(),beacon:b(),session_id:S(),pv_unique_id:E(),pv_number:I(),pv_number_global:A(),exp_bucket:w(),browser_ts:n.getTime(),tz_offset:n.getTimezoneOffset(),u:R(),x:v(),lc:T(),ua:window.navigator.userAgent};t("component_performance",r)},pr=async({payload:e},t)=>{var r;const n={...wr(e),...await Er(),...hr(),...vr(),...Tr(),browser:re(),odyssey_version:((r=window.fandomAds)==null?void 0:r.version)??"unknown"};t("adengpagestatus",H(n))};function wr(e){return{event_trigger:e.eventTrigger,deployment_environment:e.deploymentEnvironment,monetization_status:e.monetizationStatus,monetization_reasons:e.monetizationReasons.join(";"),monetization_tier:e.monetizationTier??void 0,p1_error_count:e.errors.p1,p2_error_count:e.errors.p2,p3_error_count:e.errors.p3,p4_error_count:e.errors.p4,p1_degradation_count:e.degradations.p1,p2_degradation_count:e.degradations.p2,p3_degradation_count:e.degradations.p3,p4_degradation_count:e.degradations.p4,status_first_auction_timed_out:e.statusChecks.firstAuctionTimedOut??void 0,status_helix_targeting_included:e.statusChecks.helixTargetingIncluded??void 0}}async function Er(){var i,s,c;const[e,t]=await Promise.all([(i=window.fandomHost)==null?void 0:i.adBlockData,(s=window.fandomHost)==null?void 0:s.proxyPageSuspected]),n=e==null?void 0:e(),r=(c=n==null?void 0:n.adBlockReasons)==null?void 0:c.join(";"),o={ad_block_suspected:n==null?void 0:n.adBlockSuspected,proxy_page_suspected:t};return r&&(o.ad_block_reasons=r),o}function hr(){return{pv_number:I(),pv_number_global:A(),pv_unique_id:E()}}function vr(){return{c:k(),x:v(),lc:T(),s:p(),a:C()}}function Tr(){return{session_id:S(),beacon:b(),ua:window.navigator.userAgent,u:R(),n:-1,exp_bucket:w()}}class Sr{constructor(t={}){this.map=t}generateUidForSlot(t){this.map[t]=crypto.randomUUID()}getUid(t){return this.map[t]!==void 0?this.map[t]:(this.generateUidForSlot(t),this.getUid(t))}}function kr(e,t){const n=[];for(let r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}async function br({payload:e},t){const n=new Date,r={"wiki-article":"wa",widget:"wg"},o=kr(e.recommendations,10),i={event_name:e.eventName,env:e.env,sft_v:e.softwareVersion,exp_d:e.expData,act:e.action,cat:e.category,cmp:e.component,trk_m:e.trackingMethod,b2:e.b2,c_id:e.contextContentId,c_t:e.contextContentType,c_sp:e.contextSpecialPage,w_id:e.widgetId,wl_id:e.widgetLocationId,w_cnt:e.widgetContent,w_lyt:e.widgetLayout,c:k(),n:De(),a:C(),s:p(),beacon:b(),session_id:S(),pv_unique_id:E(),pv_number:I(),pv_number_global:A(),exp_bucket:w(),b_ts:n.getTime(),tz_o:n.getTimezoneOffset(),u:R(),x:v(),lc:T(),ua:window.navigator.userAgent};await Promise.all(o.map(s=>{const a=s.map(m=>`${m.id}|${r[m.type]??m.type}|${m.position??""}`).join(","),u={...i,recs:a};return t("recommendation",u)}))}const V=100;function Ir(e){var n,r;if(e==="adengbidders"||X("force_tracking"))return V;const t=(r=(n=window.icbm)==null?void 0:n.config)==null?void 0:r.odysseyBeaconSenderTrafficLimiter;return(t==null?void 0:t[e])===void 0?V:t[e]}const h=e=>{const t=Ir(e);return t===V?{}:{sampling:vn(t)}},Ar=()=>{const e=new Sr;$().cmd.push(t=>{t.registerTracker(Ye,xn(e),h("adengadinfo")),t.registerTracker(me.BIDDER_RESPONSE,Hn(e),h("adengbidders"));const n=h("adengloadtimes");t.registerTracker(g.CREATIVE_RENDERED,({payload:r},o)=>ue({event:B,payload:{...r,type:g.CREATIVE_RENDERED}},o),n),t.registerTracker(B,ue,n),t.registerTracker(Je,Zn(e),h("adengadsizeinfo")),t.registerTracker(le.LABRADOR_KEYVALUES,mr,h("adenglabradorinfo")),t.registerTracker(ge.IDENTITY_INFO,fr,h("identityinfo")),t.registerTracker(J.TRACKING_EVENT,lr,h("trackingevent")),t.registerTracker(fe.COMPONENT_PERFORMANCE_EVENT,_r,h("component_performance")),t.registerTracker(_e.RECOMMENDATION_EVENT,br,h("recommendation")),t.registerTracker(Y.ADENGPAGESTATUS,pr,h("adengpagestatus"))})};(async()=>{var s;const e=((s=window.ads)==null?void 0:s.context.platform)??"app",t=z(),n=await Ie(M),r=be();window.icbm=await jt(e,t,n),window.dispatchEvent(new Event("instantConfigLoaded")),bt(M,n);const o=new cn,i=new Q({});window.fandomHost={...window.fandomHost??{},app:e,device:t,icbm:window.icbm,geo:n,version:Qt(),adBlockManager:o,adBlockData:o.getAdBlockData(),issueManager:i,browser:r,proxyPageSuspected:mn()},new yn,Ar(),new kn,we(window.fandomHost)})();
//# sourceMappingURL=main.js.map
