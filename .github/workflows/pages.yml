name: GitHub Pages

on:
  push:
    branches: [ main, master ]
  workflow_dispatch:

permissions:
  contents: read
  pages: write
  id-token: write

concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  deploy-docs:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Setup Pages
      uses: actions/configure-pages@v3
    
    - name: Create docs directory
      run: |
        mkdir -p docs
        
        # Copy documentation files
        cp README.md docs/index.md
        cp DEPLOY.md docs/deploy.md
        cp QUICKSTART.md docs/quickstart.md
        
        # Create simple HTML wrapper
        cat > docs/index.html << 'EOF'
        <!DOCTYPE html>
        <html lang="es">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Card Wars Kingdom - Documentation</title>
            <style>
                body {
                    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                    max-width: 1200px;
                    margin: 0 auto;
                    padding: 20px;
                    line-height: 1.6;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    color: #333;
                }
                .container {
                    background: white;
                    border-radius: 10px;
                    padding: 40px;
                    box-shadow: 0 10px 40px rgba(0,0,0,0.2);
                }
                h1 {
                    color: #667eea;
                    border-bottom: 3px solid #667eea;
                    padding-bottom: 10px;
                }
                .buttons {
                    display: flex;
                    gap: 10px;
                    flex-wrap: wrap;
                    margin: 30px 0;
                }
                .button {
                    display: inline-block;
                    padding: 12px 24px;
                    background: #667eea;
                    color: white;
                    text-decoration: none;
                    border-radius: 5px;
                    transition: all 0.3s;
                }
                .button:hover {
                    background: #764ba2;
                    transform: translateY(-2px);
                    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                }
                .platforms {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                    gap: 20px;
                    margin: 30px 0;
                }
                .platform {
                    border: 2px solid #e0e0e0;
                    border-radius: 8px;
                    padding: 20px;
                    text-align: center;
                    transition: all 0.3s;
                }
                .platform:hover {
                    border-color: #667eea;
                    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
                }
                .platform h3 {
                    margin-top: 0;
                    color: #667eea;
                }
            </style>
        </head>
        <body>
            <div class="container">
                <h1>üé¥ Card Wars Kingdom - Deployment Guide</h1>
                <p>Bienvenido a la gu√≠a de despliegue de Card Wars Kingdom. Elige tu plataforma favorita para comenzar.</p>
                
                <div class="buttons">
                    <a href="https://github.com/Lu2312/Welcome-Card-Wars-Kingdom_files" class="button">üì¶ GitHub Repository</a>
                    <a href="deploy.md" class="button">üìñ Gu√≠a Completa</a>
                    <a href="quickstart.md" class="button">‚ö° Quick Start</a>
                </div>
                
                <h2>‚òÅÔ∏è Plataformas de Despliegue</h2>
                <div class="platforms">
                    <div class="platform">
                        <h3>üü¢ Vercel</h3>
                        <p>Despliegue instant√°neo y autom√°tico</p>
                        <a href="https://vercel.com/new/clone?repository-url=https://github.com/Lu2312/Welcome-Card-Wars-Kingdom_files" class="button">Deploy to Vercel</a>
                    </div>
                    
                    <div class="platform">
                        <h3>üü£ Railway</h3>
                        <p>$5 de cr√©dito gratis mensualmente</p>
                        <a href="https://railway.app/new" class="button">Deploy to Railway</a>
                    </div>
                    
                    <div class="platform">
                        <h3>üé® Render</h3>
                        <p>Hosting gratuito con SSL autom√°tico</p>
                        <a href="https://render.com" class="button">Deploy to Render</a>
                    </div>
                    
                    <div class="platform">
                        <h3>üü™ Heroku</h3>
                        <p>Plataforma cl√°sica y confiable</p>
                        <a href="https://heroku.com" class="button">Deploy to Heroku</a>
                    </div>
                    
                    <div class="platform">
                        <h3>üê≥ Docker</h3>
                        <p>Contenedores para cualquier servidor</p>
                        <a href="deploy.md#docker" class="button">Ver Gu√≠a Docker</a>
                    </div>
                    
                    <div class="platform">
                        <h3>üñ•Ô∏è VPS</h3>
                        <p>Control total sobre tu servidor</p>
                        <a href="deploy.md#vps" class="button">Ver Gu√≠a VPS</a>
                    </div>
                </div>
                
                <h2>üìã Configuraci√≥n R√°pida</h2>
                <ol>
                    <li>Elige una plataforma de las opciones anteriores</li>
                    <li>Conecta tu cuenta de GitHub</li>
                    <li>Importa el repositorio</li>
                    <li>Configura las variables de entorno (SECRET_KEY, FLASK_ENV)</li>
                    <li>¬°Despliega! üöÄ</li>
                </ol>
                
                <h2>üîß Variables de Entorno Requeridas</h2>
                <ul>
                    <li><strong>SECRET_KEY</strong>: Clave secreta para Flask (genera una segura)</li>
                    <li><strong>FLASK_ENV</strong>: Debe ser "production"</li>
                </ul>
                
                <h2>‚úÖ Verificaci√≥n</h2>
                <p>Una vez desplegado, verifica que funcione visitando:</p>
                <ul>
                    <li><code>/api/health</code> - Estado del servidor</li>
                    <li><code>/</code> - P√°gina principal</li>
                </ul>
                
                <hr>
                <p style="text-align: center; color: #666;">
                    Made with ‚ù§Ô∏è for Adventure Time fans | 
                    <a href="https://github.com/Lu2312/Welcome-Card-Wars-Kingdom_files">View on GitHub</a>
                </p>
            </div>
        </body>
        </html>
        EOF
    
    - name: Upload artifact
      uses: actions/upload-pages-artifact@v2
      with:
        path: 'docs'
    
    - name: Deploy to GitHub Pages
      id: deployment
      uses: actions/deploy-pages@v2
